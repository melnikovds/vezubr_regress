{"uid":"c43c5b774d1bd8ce","name":"test_tariff_directory_lkz[lkz]","fullName":"tests.test_manual_lkz#test_tariff_directory_lkz","historyId":"6a0e2d492507bdd9814eeaca30472395","time":{"start":1741545655882,"stop":1741545680362,"duration":24480},"description":"ЛКЗ Тест фильтра 'Тарифы' в разделе справочники","descriptionHtml":"<p>ЛКЗ Тест фильтра 'Тарифы' в разделе справочники</p>\n","status":"failed","statusMessage":"AssertionError: Expected text 'ПРР-20240818230735' to be present on the page, but it was not found.","statusTrace":"base_fixture = (<base.base_class.Base object at 0x000001AC732372C0>, <pages.sidebar.SideBar object at 0x000001AC73234500>), domain = 'com'\n\n    @allure.story(\"Extended test\")\n    @allure.feature('Фильтры')\n    @allure.description(\"ЛКЗ Тест фильтра 'Тарифы' в разделе справочники\")\n    @pytest.mark.parametrize('base_fixture', ['lkz'], indirect=True) # Параметризация роли\n    def test_tariff_directory_lkz(base_fixture, domain):\n        # Инициализация базовых объектов через фикстуру\n        base, sidebar = base_fixture\n    \n        # переход к списку тарифов\n        base.move_and_click(move_to=sidebar.directories_hover, click_to=sidebar.tariffs_list_button,\n                            do_assert=True, wait='lst')\n    \n        add = Manual(base.driver)\n        # проверка фильтра \"Название тарифа\"\n        add.input_in_field(add.tariff_name, value='202412092122', click_first=True)\n        time.sleep(2)\n        add.verify_text_on_page(text='LTL-20241209212214', should_exist=True)\n        add.verify_text_on_page(text='20241210031127', should_exist=False)\n        time.sleep(1)\n        add.backspace_and_input(add.tariff_name, value='')\n        time.sleep(2)\n    \n        # проверка №1 фильтра \"Статус\"\n        add.dropdown_without_input(add.tariff_status, option_text='Не активный')\n        time.sleep(2)\n        add.verify_text_on_page(text='ПРР-20241209180612', should_exist=True)\n        add.verify_text_on_page(text='ТТ-20240910124407', should_exist=False)\n        time.sleep(2)\n    \n        # проверка №2 фильтра \"Статус\"\n        add.dropdown_without_input(add.tariff_status, option_text='Активный')\n        time.sleep(2)\n>       add.verify_text_on_page(text='ПРР-20240818230735', should_exist=True)\n\ntests\\test_manual_lkz.py:241: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nself = <pages.manual_page.Manual object at 0x000001AC73236DE0>, text = 'ПРР-20240818230735', should_exist = True\n\n    def verify_text_on_page(self, text: str, should_exist: bool = True) -> None:\n        \"\"\"\n        Проверяет наличие или отсутствие заданного текста на всей странице.\n    \n        Parameters\n        ----------\n        text : str\n            Текст для поиска на странице.\n        should_exist : bool, optional\n            Если True, проверяет, что текст присутствует на странице.\n            Если False, проверяет, что текст отсутствует на странице. По умолчанию True.\n    \n        Raises\n        ------\n        AssertionError\n            Если текст не найден при should_exist=True или найден при should_exist=False.\n        \"\"\"\n        # Формируем сообщение для шага Allure и вывода в консоль\n        message = f\"Verify that text '{text}' is {'present' if should_exist else 'absent'} on the page\"\n    \n        with allure.step(message):\n            page_source = self.driver.page_source\n            text_found = text in page_source\n    \n            if should_exist:\n>               assert text_found, f\"Expected text '{text}' to be present on the page, but it was not found.\"\nE               AssertionError: Expected text 'ПРР-20240818230735' to be present on the page, but it was not found.\n\nbase\\base_class.py:273: AssertionError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"_session_faker","time":{"start":1741540328287,"stop":1741540328288,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"hasContent":false,"attachmentStep":false,"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false},{"name":"domain","time":{"start":1741545642673,"stop":1741545642673,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"hasContent":false,"attachmentStep":false,"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false},{"name":"base_fixture","time":{"start":1741545642673,"stop":1741545655882,"duration":13209},"status":"passed","steps":[{"name":"Start test","time":{"start":1741545643802,"stop":1741545643803,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"hasContent":false,"attachmentStep":false,"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false},{"name":"Current url: https://enter.vezubr.com/login","time":{"start":1741545648671,"stop":1741545648671,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"hasContent":false,"attachmentStep":false,"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false},{"name":"Input in user_email_input: ***","time":{"start":1741545648709,"stop":1741545648833,"duration":124},"status":"passed","steps":[],"attachments":[],"parameters":[],"hasContent":false,"attachmentStep":false,"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false},{"name":"Input in password_input: ***","time":{"start":1741545648833,"stop":1741545648954,"duration":121},"status":"passed","steps":[],"attachments":[],"parameters":[],"hasContent":false,"attachmentStep":false,"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false},{"name":"Click on login_button","time":{"start":1741545648954,"stop":1741545649052,"duration":98},"status":"passed","steps":[],"attachments":[],"parameters":[],"hasContent":false,"attachmentStep":false,"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false},{"name":"Click on sidebar_button","time":{"start":1741545649052,"stop":1741545655882,"duration":6830},"status":"passed","steps":[],"attachments":[],"parameters":[],"hasContent":false,"attachmentStep":false,"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false}],"attachments":[],"parameters":[],"hasContent":true,"attachmentStep":false,"stepsCount":6,"attachmentsCount":0,"shouldDisplayMessage":false}],"testStage":{"description":"ЛКЗ Тест фильтра 'Тарифы' в разделе справочники","status":"failed","statusMessage":"AssertionError: Expected text 'ПРР-20240818230735' to be present on the page, but it was not found.","statusTrace":"base_fixture = (<base.base_class.Base object at 0x000001AC732372C0>, <pages.sidebar.SideBar object at 0x000001AC73234500>), domain = 'com'\n\n    @allure.story(\"Extended test\")\n    @allure.feature('Фильтры')\n    @allure.description(\"ЛКЗ Тест фильтра 'Тарифы' в разделе справочники\")\n    @pytest.mark.parametrize('base_fixture', ['lkz'], indirect=True) # Параметризация роли\n    def test_tariff_directory_lkz(base_fixture, domain):\n        # Инициализация базовых объектов через фикстуру\n        base, sidebar = base_fixture\n    \n        # переход к списку тарифов\n        base.move_and_click(move_to=sidebar.directories_hover, click_to=sidebar.tariffs_list_button,\n                            do_assert=True, wait='lst')\n    \n        add = Manual(base.driver)\n        # проверка фильтра \"Название тарифа\"\n        add.input_in_field(add.tariff_name, value='202412092122', click_first=True)\n        time.sleep(2)\n        add.verify_text_on_page(text='LTL-20241209212214', should_exist=True)\n        add.verify_text_on_page(text='20241210031127', should_exist=False)\n        time.sleep(1)\n        add.backspace_and_input(add.tariff_name, value='')\n        time.sleep(2)\n    \n        # проверка №1 фильтра \"Статус\"\n        add.dropdown_without_input(add.tariff_status, option_text='Не активный')\n        time.sleep(2)\n        add.verify_text_on_page(text='ПРР-20241209180612', should_exist=True)\n        add.verify_text_on_page(text='ТТ-20240910124407', should_exist=False)\n        time.sleep(2)\n    \n        # проверка №2 фильтра \"Статус\"\n        add.dropdown_without_input(add.tariff_status, option_text='Активный')\n        time.sleep(2)\n>       add.verify_text_on_page(text='ПРР-20240818230735', should_exist=True)\n\ntests\\test_manual_lkz.py:241: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nself = <pages.manual_page.Manual object at 0x000001AC73236DE0>, text = 'ПРР-20240818230735', should_exist = True\n\n    def verify_text_on_page(self, text: str, should_exist: bool = True) -> None:\n        \"\"\"\n        Проверяет наличие или отсутствие заданного текста на всей странице.\n    \n        Parameters\n        ----------\n        text : str\n            Текст для поиска на странице.\n        should_exist : bool, optional\n            Если True, проверяет, что текст присутствует на странице.\n            Если False, проверяет, что текст отсутствует на странице. По умолчанию True.\n    \n        Raises\n        ------\n        AssertionError\n            Если текст не найден при should_exist=True или найден при should_exist=False.\n        \"\"\"\n        # Формируем сообщение для шага Allure и вывода в консоль\n        message = f\"Verify that text '{text}' is {'present' if should_exist else 'absent'} on the page\"\n    \n        with allure.step(message):\n            page_source = self.driver.page_source\n            text_found = text in page_source\n    \n            if should_exist:\n>               assert text_found, f\"Expected text '{text}' to be present on the page, but it was not found.\"\nE               AssertionError: Expected text 'ПРР-20240818230735' to be present on the page, but it was not found.\n\nbase\\base_class.py:273: AssertionError","steps":[{"name":"Move to directories_hover","time":{"start":1741545655882,"stop":1741545656729,"duration":847},"status":"passed","steps":[],"attachments":[],"parameters":[],"hasContent":false,"attachmentStep":false,"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false},{"name":"Click on tariffs_list_button","time":{"start":1741545656830,"stop":1741545658255,"duration":1425},"status":"passed","steps":[{"name":"Assert \"Тарифы\" == \"Тарифы\"","time":{"start":1741545658255,"stop":1741545658255,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"hasContent":false,"attachmentStep":false,"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false}],"attachments":[],"parameters":[],"hasContent":true,"attachmentStep":false,"stepsCount":1,"attachmentsCount":0,"shouldDisplayMessage":false},{"name":"Click and Input in tariff_name: 202412092122","time":{"start":1741545658255,"stop":1741545658508,"duration":253},"status":"passed","steps":[],"attachments":[],"parameters":[],"hasContent":false,"attachmentStep":false,"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false},{"name":"Verify that text 'LTL-20241209212214' is present on the page","time":{"start":1741545660509,"stop":1741545660552,"duration":43},"status":"passed","steps":[],"attachments":[],"parameters":[],"hasContent":false,"attachmentStep":false,"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false},{"name":"Verify that text '20241210031127' is absent on the page","time":{"start":1741545660552,"stop":1741545660577,"duration":25},"status":"passed","steps":[],"attachments":[],"parameters":[],"hasContent":false,"attachmentStep":false,"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false},{"name":"Backspace all times and input in tariff_name: ","time":{"start":1741545661578,"stop":1741545661713,"duration":135},"status":"passed","steps":[],"attachments":[],"parameters":[],"hasContent":false,"attachmentStep":false,"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false},{"name":"Select 'Не активный' from dropdown tariff_status","time":{"start":1741545663714,"stop":1741545668965,"duration":5251},"status":"passed","steps":[],"attachments":[],"parameters":[],"hasContent":false,"attachmentStep":false,"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false},{"name":"Verify that text 'ПРР-20241209180612' is present on the page","time":{"start":1741545670966,"stop":1741545671013,"duration":47},"status":"passed","steps":[],"attachments":[],"parameters":[],"hasContent":false,"attachmentStep":false,"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false},{"name":"Verify that text 'ТТ-20240910124407' is absent on the page","time":{"start":1741545671013,"stop":1741545671051,"duration":38},"status":"passed","steps":[],"attachments":[],"parameters":[],"hasContent":false,"attachmentStep":false,"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false},{"name":"Select 'Активный' from dropdown tariff_status","time":{"start":1741545673052,"stop":1741545678324,"duration":5272},"status":"passed","steps":[],"attachments":[],"parameters":[],"hasContent":false,"attachmentStep":false,"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false},{"name":"Verify that text 'ПРР-20240818230735' is present on the page","time":{"start":1741545680324,"stop":1741545680362,"duration":38},"status":"failed","statusMessage":"AssertionError: Expected text 'ПРР-20240818230735' to be present on the page, but it was not found.\n","statusTrace":"  File \"C:\\Users\\l2new\\PycharmProjects\\Vezubr_Autotests\\base\\base_class.py\", line 273, in verify_text_on_page\n    assert text_found, f\"Expected text '{text}' to be present on the page, but it was not found.\"\n           ^^^^^^^^^^\n","steps":[],"attachments":[],"parameters":[],"hasContent":true,"attachmentStep":false,"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":true},{"name":"Screen taken: tests_test_manual_lkz.py_test_tariff_directory_lkz[lkz]_2025.03.09.18.41.20.png","time":{"start":1741545680582,"stop":1741545680582,"duration":0},"status":"passed","steps":[],"attachments":[{"uid":"90450bca3b0eba5b","name":"Screenshot","source":"90450bca3b0eba5b.png","type":"image/png","size":124278}],"parameters":[],"hasContent":true,"attachmentStep":false,"stepsCount":0,"attachmentsCount":1,"shouldDisplayMessage":false}],"attachments":[],"parameters":[],"hasContent":true,"attachmentStep":false,"stepsCount":13,"attachmentsCount":1,"shouldDisplayMessage":true},"afterStages":[{"name":"base_fixture::0","time":{"start":1741545680583,"stop":1741545682791,"duration":2208},"status":"passed","steps":[{"name":"Test finish","time":{"start":1741545680583,"stop":1741545682791,"duration":2208},"status":"passed","steps":[],"attachments":[],"parameters":[],"hasContent":false,"attachmentStep":false,"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false}],"attachments":[],"parameters":[],"hasContent":true,"attachmentStep":false,"stepsCount":1,"attachmentsCount":0,"shouldDisplayMessage":false}],"labels":[{"name":"story","value":"Extended test"},{"name":"feature","value":"Фильтры"},{"name":"parentSuite","value":"tests"},{"name":"suite","value":"test_manual_lkz"},{"name":"host","value":"FirexPC"},{"name":"thread","value":"22332-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.test_manual_lkz"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"base_fixture","value":"'lkz'"}],"links":[],"hidden":true,"retry":true,"extra":{"categories":[],"tags":[]},"source":"c43c5b774d1bd8ce.json","parameterValues":["'lkz'"]}