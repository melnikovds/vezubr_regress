{"uid":"d69bde65e7c0bf0e","name":"test_trailer_directory_lkp[lkp]","fullName":"tests.test_manual_lkp#test_trailer_directory_lkp","historyId":"38f6ff3983e42336eba97073818de1aa","time":{"start":1742234099921,"stop":1742234111315,"duration":11394},"description":"ЛКП Тест фильтра 'Полуприцепы' в разделе справочники","descriptionHtml":"<p>ЛКП Тест фильтра 'Полуприцепы' в разделе справочники</p>\n","status":"failed","statusMessage":"AssertionError: Expected '3514' to appear 2 times, but found 3 times.","statusTrace":"base_fixture = (<base.base_class.Base object at 0x000001B42E6BCF20>, <pages.sidebar.SideBar object at 0x000001B42E6F97F0>), domain = 'com'\n\n    @allure.story(\"Extended test\")\n    @allure.feature('Фильтры')\n    @allure.description(\"ЛКП Тест фильтра 'Полуприцепы' в разделе справочники\")\n    @pytest.mark.parametrize('base_fixture', ['lkp'], indirect=True)  # Параметризация роли\n    def test_trailer_directory_lkp(base_fixture, domain):\n        # Инициализация базовых объектов через фикстуру\n        base, sidebar = base_fixture\n    \n        # переход к списку тягачей\n        base.move_and_click(move_to=sidebar.directories_hover, click_to=sidebar.trailers_list_button,\n                            do_assert=True, wait='lst')\n    \n        add = Manual(base.driver)\n        # проверка фильтра \"Госномер полуприцепа\"\n        add.backspace_and_input(add.trailer_number, value='')\n        time.sleep(1)\n        add.input_in_field(add.trailer_number, value='3058', click_first=True)\n        time.sleep(3)\n        add.verify_text_on_page(text='ПП20240220123058', should_exist=True)\n        add.verify_text_on_page(text='ПП-20241019130545', should_exist=False)\n        time.sleep(1)\n        add.backspace_and_input(add.trailer_number, value='')\n        time.sleep(1)\n        add.input_in_field(add.trailer_number, value='ПП20240126103514', click_first=True)\n        time.sleep(2)\n>       add.find_text_on_page(text='3514', occurrences=2)\n\ntests\\test_manual_lkp.py:362: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nself = <pages.manual_page.Manual object at 0x000001B42E8529C0>, text = '3514', occurrences = 2\n\n    def find_text_on_page(self, text: str, occurrences: int = 1) -> None:\n        \"\"\"\n        Проверяет наличие указанного текста на странице и количество его вхождений.\n    \n        Parameters\n        ----------\n        text : str\n            Текст, который необходимо найти на странице.\n        occurrences : int, optional\n            Количество раз, которое текст должен присутствовать на странице (по умолчанию 1).\n    \n        Raises\n        -------\n        AssertionError\n            Если количество вхождений текста на странице не совпадает с ожидаемым.\n        \"\"\"\n    \n        try:\n            page_source = self.driver.page_source\n            count = page_source.count(text)\n    \n            if count == occurrences:\n                with allure.step(f\"Text '{text}' found {count} times as expected.\"):\n                    print(f\"Text '{text}' found {count} times as expected.\")\n            else:\n>               raise AssertionError (\n                    f\"Expected '{text}' to appear {occurrences} times, but found {count} times.\"\n                )\nE               AssertionError: Expected '3514' to appear 2 times, but found 3 times.\n\nbase\\base_class.py:304: AssertionError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":1,"retriesStatusChange":false,"beforeStages":[{"name":"_session_faker","time":{"start":1742228670612,"stop":1742228670613,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"hasContent":false,"attachmentStep":false,"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false},{"name":"domain","time":{"start":1742234088155,"stop":1742234088155,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"hasContent":false,"attachmentStep":false,"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false},{"name":"base_fixture","time":{"start":1742234088156,"stop":1742234099921,"duration":11765},"status":"passed","steps":[{"name":"Start test","time":{"start":1742234089324,"stop":1742234089324,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"hasContent":false,"attachmentStep":false,"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false},{"name":"Current url: https://enter.vezubr.com/login","time":{"start":1742234093183,"stop":1742234093183,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"hasContent":false,"attachmentStep":false,"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false},{"name":"Input in user_email_input: ***","time":{"start":1742234093216,"stop":1742234093342,"duration":126},"status":"passed","steps":[],"attachments":[],"parameters":[],"hasContent":false,"attachmentStep":false,"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false},{"name":"Input in password_input: ***","time":{"start":1742234093342,"stop":1742234093438,"duration":96},"status":"passed","steps":[],"attachments":[],"parameters":[],"hasContent":false,"attachmentStep":false,"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false},{"name":"Click on login_button","time":{"start":1742234093438,"stop":1742234093541,"duration":103},"status":"passed","steps":[],"attachments":[],"parameters":[],"hasContent":false,"attachmentStep":false,"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false},{"name":"Click on sidebar_button","time":{"start":1742234093541,"stop":1742234099921,"duration":6380},"status":"passed","steps":[],"attachments":[],"parameters":[],"hasContent":false,"attachmentStep":false,"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false}],"attachments":[],"parameters":[],"hasContent":true,"attachmentStep":false,"stepsCount":6,"attachmentsCount":0,"shouldDisplayMessage":false}],"testStage":{"description":"ЛКП Тест фильтра 'Полуприцепы' в разделе справочники","status":"failed","statusMessage":"AssertionError: Expected '3514' to appear 2 times, but found 3 times.","statusTrace":"base_fixture = (<base.base_class.Base object at 0x000001B42E6BCF20>, <pages.sidebar.SideBar object at 0x000001B42E6F97F0>), domain = 'com'\n\n    @allure.story(\"Extended test\")\n    @allure.feature('Фильтры')\n    @allure.description(\"ЛКП Тест фильтра 'Полуприцепы' в разделе справочники\")\n    @pytest.mark.parametrize('base_fixture', ['lkp'], indirect=True)  # Параметризация роли\n    def test_trailer_directory_lkp(base_fixture, domain):\n        # Инициализация базовых объектов через фикстуру\n        base, sidebar = base_fixture\n    \n        # переход к списку тягачей\n        base.move_and_click(move_to=sidebar.directories_hover, click_to=sidebar.trailers_list_button,\n                            do_assert=True, wait='lst')\n    \n        add = Manual(base.driver)\n        # проверка фильтра \"Госномер полуприцепа\"\n        add.backspace_and_input(add.trailer_number, value='')\n        time.sleep(1)\n        add.input_in_field(add.trailer_number, value='3058', click_first=True)\n        time.sleep(3)\n        add.verify_text_on_page(text='ПП20240220123058', should_exist=True)\n        add.verify_text_on_page(text='ПП-20241019130545', should_exist=False)\n        time.sleep(1)\n        add.backspace_and_input(add.trailer_number, value='')\n        time.sleep(1)\n        add.input_in_field(add.trailer_number, value='ПП20240126103514', click_first=True)\n        time.sleep(2)\n>       add.find_text_on_page(text='3514', occurrences=2)\n\ntests\\test_manual_lkp.py:362: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nself = <pages.manual_page.Manual object at 0x000001B42E8529C0>, text = '3514', occurrences = 2\n\n    def find_text_on_page(self, text: str, occurrences: int = 1) -> None:\n        \"\"\"\n        Проверяет наличие указанного текста на странице и количество его вхождений.\n    \n        Parameters\n        ----------\n        text : str\n            Текст, который необходимо найти на странице.\n        occurrences : int, optional\n            Количество раз, которое текст должен присутствовать на странице (по умолчанию 1).\n    \n        Raises\n        -------\n        AssertionError\n            Если количество вхождений текста на странице не совпадает с ожидаемым.\n        \"\"\"\n    \n        try:\n            page_source = self.driver.page_source\n            count = page_source.count(text)\n    \n            if count == occurrences:\n                with allure.step(f\"Text '{text}' found {count} times as expected.\"):\n                    print(f\"Text '{text}' found {count} times as expected.\")\n            else:\n>               raise AssertionError (\n                    f\"Expected '{text}' to appear {occurrences} times, but found {count} times.\"\n                )\nE               AssertionError: Expected '3514' to appear 2 times, but found 3 times.\n\nbase\\base_class.py:304: AssertionError","steps":[{"name":"Move to directories_hover","time":{"start":1742234099921,"stop":1742234100296,"duration":375},"status":"passed","steps":[],"attachments":[],"parameters":[],"hasContent":false,"attachmentStep":false,"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false},{"name":"Click on trailers_list_button","time":{"start":1742234100397,"stop":1742234101272,"duration":875},"status":"passed","steps":[{"name":"Assert \"Полуприцепы\" == \"Полуприцепы\"","time":{"start":1742234101272,"stop":1742234101272,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"hasContent":false,"attachmentStep":false,"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false}],"attachments":[],"parameters":[],"hasContent":true,"attachmentStep":false,"stepsCount":1,"attachmentsCount":0,"shouldDisplayMessage":false},{"name":"Backspace all times and input in trailer_number: ","time":{"start":1742234101272,"stop":1742234101463,"duration":191},"status":"passed","steps":[],"attachments":[],"parameters":[],"hasContent":false,"attachmentStep":false,"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false},{"name":"Click and Input in trailer_number: 3058","time":{"start":1742234102465,"stop":1742234103450,"duration":985},"status":"passed","steps":[],"attachments":[],"parameters":[],"hasContent":false,"attachmentStep":false,"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false},{"name":"Verify that text 'ПП20240220123058' is present on the page","time":{"start":1742234106450,"stop":1742234106475,"duration":25},"status":"passed","steps":[],"attachments":[],"parameters":[],"hasContent":false,"attachmentStep":false,"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false},{"name":"Verify that text 'ПП-20241019130545' is absent on the page","time":{"start":1742234106476,"stop":1742234106498,"duration":22},"status":"passed","steps":[],"attachments":[],"parameters":[],"hasContent":false,"attachmentStep":false,"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false},{"name":"Backspace all times and input in trailer_number: ","time":{"start":1742234107500,"stop":1742234107605,"duration":105},"status":"passed","steps":[],"attachments":[],"parameters":[],"hasContent":false,"attachmentStep":false,"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false},{"name":"Click and Input in trailer_number: ПП20240126103514","time":{"start":1742234108606,"stop":1742234109288,"duration":682},"status":"passed","steps":[],"attachments":[],"parameters":[],"hasContent":false,"attachmentStep":false,"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false},{"name":"Error finding text on the page: Expected '3514' to appear 2 times, but found 3 times.","time":{"start":1742234111315,"stop":1742234111315,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"hasContent":false,"attachmentStep":false,"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false},{"name":"Screen taken: tests_test_manual_lkp.py_test_trailer_directory_lkp[lkp]_2025.03.17.17.55.11.png","time":{"start":1742234111505,"stop":1742234111506,"duration":1},"status":"passed","steps":[],"attachments":[{"uid":"c8f4d0a7c4e5e859","name":"Screenshot","source":"c8f4d0a7c4e5e859.png","type":"image/png","size":85103}],"parameters":[],"hasContent":true,"attachmentStep":false,"stepsCount":0,"attachmentsCount":1,"shouldDisplayMessage":false}],"attachments":[],"parameters":[],"hasContent":true,"attachmentStep":false,"stepsCount":11,"attachmentsCount":1,"shouldDisplayMessage":true},"afterStages":[{"name":"base_fixture::0","time":{"start":1742234111506,"stop":1742234113684,"duration":2178},"status":"passed","steps":[{"name":"Test finish","time":{"start":1742234111506,"stop":1742234113684,"duration":2178},"status":"passed","steps":[],"attachments":[],"parameters":[],"hasContent":false,"attachmentStep":false,"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false}],"attachments":[],"parameters":[],"hasContent":true,"attachmentStep":false,"stepsCount":1,"attachmentsCount":0,"shouldDisplayMessage":false}],"labels":[{"name":"feature","value":"Фильтры"},{"name":"story","value":"Extended test"},{"name":"parentSuite","value":"tests"},{"name":"suite","value":"test_manual_lkp"},{"name":"host","value":"FirexPC"},{"name":"thread","value":"22408-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.test_manual_lkp"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"base_fixture","value":"'lkp'"}],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[{"uid":"607b78ac65b2f8b9","status":"failed","statusDetails":"AssertionError: Expected '3514' to appear 2 times, but found 3 times.","time":{"start":1741545268311,"stop":1741545279089,"duration":10778}}],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"tags":[]},"source":"d69bde65e7c0bf0e.json","parameterValues":["'lkp'"]}