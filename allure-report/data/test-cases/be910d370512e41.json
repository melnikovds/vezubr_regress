{"uid":"be910d370512e41","name":"test_tractor_directory_lkp[lkp]","fullName":"tests.test_manual_lkp#test_tractor_directory_lkp","historyId":"276bcd45259f322ad0df82a0cf374315","time":{"start":1741545211584,"stop":1741545252369,"duration":40785},"description":"ЛКП Тест фильтра 'Тягачи' в разделе справочники","descriptionHtml":"<p>ЛКП Тест фильтра 'Тягачи' в разделе справочники</p>\n","status":"failed","statusMessage":"AssertionError: Expected text 'ТЯГ-20241212233054' to be absent on the page, but it was found.","statusTrace":"base_fixture = (<base.base_class.Base object at 0x000001AC72E2C3B0>, <pages.sidebar.SideBar object at 0x000001AC73237E60>), domain = 'com'\n\n    @allure.story(\"Extended test\")\n    @allure.feature('Фильтры')\n    @allure.description(\"ЛКП Тест фильтра 'Тягачи' в разделе справочники\")\n    @pytest.mark.parametrize('base_fixture', ['lkp'], indirect=True)  # Параметризация роли\n    def test_tractor_directory_lkp(base_fixture, domain):\n        # Инициализация базовых объектов через фикстуру\n        base, sidebar = base_fixture\n    \n        # переход к списку тягачей\n        base.move_and_click(move_to=sidebar.directories_hover, click_to=sidebar.tractors_list_button,\n                            do_assert=True, wait='lst')\n    \n        add = Manual(base.driver)\n        # проверка фильтра \"Госномер тягача\"\n        add.input_in_field(add.tractor_number, value='832', click_first=True)\n        time.sleep(3)\n        add.verify_text_on_page(text='ТЯГ-20240708081832', should_exist=True)\n        add.verify_text_on_page(text='ТЯГ-20240517055115', should_exist=False)\n        time.sleep(1)\n        add.backspace_and_input(add.tractor_number, value='')\n        time.sleep(1)\n        add.input_in_field(add.tractor_number, value='ТЯГ-20240531061917', click_first=True)\n        time.sleep(2)\n        add.find_text_on_page(text='1917', occurrences=3)\n        time.sleep(1)\n        add.backspace_and_input(add.tractor_number, value='')\n        time.sleep(1)\n    \n        # проверка №1 фильтра \"Статус в системе\"\n        add.dropdown_without_input(add.status_in_system_two, option_text='Неактивный')\n        time.sleep(3)\n        add.verify_text_on_page(text='ТЯГ-20240126103308', should_exist=False)\n        time.sleep(2)\n    \n        # проверка №2 фильтра \"Статус в системе\"\n        add.dropdown_without_input(add.status_in_system_two, option_text='Активный')\n        time.sleep(3)\n        add.verify_text_on_page(text='ТЯГ-20240320203430', should_exist=True)\n        time.sleep(2)\n    \n        # проверка №1 фильтра \"Статус в рейсе\"\n        add.dropdown_without_input(add.status_on_flight_two, option_text='Нет заказов')\n        time.sleep(2)\n        add.verify_text_on_page(text='ТЯГ-20240116131200', should_exist=True)\n>       add.verify_text_on_page(text='ТЯГ-20241212233054', should_exist=False)\n\ntests\\test_manual_lkp.py:288: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nself = <pages.manual_page.Manual object at 0x000001AC73237BF0>, text = 'ТЯГ-20241212233054', should_exist = False\n\n    def verify_text_on_page(self, text: str, should_exist: bool = True) -> None:\n        \"\"\"\n        Проверяет наличие или отсутствие заданного текста на всей странице.\n    \n        Parameters\n        ----------\n        text : str\n            Текст для поиска на странице.\n        should_exist : bool, optional\n            Если True, проверяет, что текст присутствует на странице.\n            Если False, проверяет, что текст отсутствует на странице. По умолчанию True.\n    \n        Raises\n        ------\n        AssertionError\n            Если текст не найден при should_exist=True или найден при should_exist=False.\n        \"\"\"\n        # Формируем сообщение для шага Allure и вывода в консоль\n        message = f\"Verify that text '{text}' is {'present' if should_exist else 'absent'} on the page\"\n    \n        with allure.step(message):\n            page_source = self.driver.page_source\n            text_found = text in page_source\n    \n            if should_exist:\n                assert text_found, f\"Expected text '{text}' to be present on the page, but it was not found.\"\n            else:\n>               assert not text_found, f\"Expected text '{text}' to be absent on the page, but it was found.\"\nE               AssertionError: Expected text 'ТЯГ-20241212233054' to be absent on the page, but it was found.\n\nbase\\base_class.py:275: AssertionError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"_session_faker","time":{"start":1741540328287,"stop":1741540328288,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"hasContent":false,"attachmentStep":false,"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false},{"name":"base_fixture","time":{"start":1741545198687,"stop":1741545211583,"duration":12896},"status":"passed","steps":[{"name":"Start test","time":{"start":1741545199805,"stop":1741545199805,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"hasContent":false,"attachmentStep":false,"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false},{"name":"Current url: https://enter.vezubr.com/login","time":{"start":1741545203875,"stop":1741545203875,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"hasContent":false,"attachmentStep":false,"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false},{"name":"Input in user_email_input: ***","time":{"start":1741545203911,"stop":1741545204059,"duration":148},"status":"passed","steps":[],"attachments":[],"parameters":[],"hasContent":false,"attachmentStep":false,"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false},{"name":"Input in password_input: ***","time":{"start":1741545204059,"stop":1741545204172,"duration":113},"status":"passed","steps":[],"attachments":[],"parameters":[],"hasContent":false,"attachmentStep":false,"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false},{"name":"Click on login_button","time":{"start":1741545204172,"stop":1741545204265,"duration":93},"status":"passed","steps":[],"attachments":[],"parameters":[],"hasContent":false,"attachmentStep":false,"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false},{"name":"Click on sidebar_button","time":{"start":1741545204266,"stop":1741545211583,"duration":7317},"status":"passed","steps":[],"attachments":[],"parameters":[],"hasContent":false,"attachmentStep":false,"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false}],"attachments":[],"parameters":[],"hasContent":true,"attachmentStep":false,"stepsCount":6,"attachmentsCount":0,"shouldDisplayMessage":false},{"name":"domain","time":{"start":1741545198687,"stop":1741545198687,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"hasContent":false,"attachmentStep":false,"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false}],"testStage":{"description":"ЛКП Тест фильтра 'Тягачи' в разделе справочники","status":"failed","statusMessage":"AssertionError: Expected text 'ТЯГ-20241212233054' to be absent on the page, but it was found.","statusTrace":"base_fixture = (<base.base_class.Base object at 0x000001AC72E2C3B0>, <pages.sidebar.SideBar object at 0x000001AC73237E60>), domain = 'com'\n\n    @allure.story(\"Extended test\")\n    @allure.feature('Фильтры')\n    @allure.description(\"ЛКП Тест фильтра 'Тягачи' в разделе справочники\")\n    @pytest.mark.parametrize('base_fixture', ['lkp'], indirect=True)  # Параметризация роли\n    def test_tractor_directory_lkp(base_fixture, domain):\n        # Инициализация базовых объектов через фикстуру\n        base, sidebar = base_fixture\n    \n        # переход к списку тягачей\n        base.move_and_click(move_to=sidebar.directories_hover, click_to=sidebar.tractors_list_button,\n                            do_assert=True, wait='lst')\n    \n        add = Manual(base.driver)\n        # проверка фильтра \"Госномер тягача\"\n        add.input_in_field(add.tractor_number, value='832', click_first=True)\n        time.sleep(3)\n        add.verify_text_on_page(text='ТЯГ-20240708081832', should_exist=True)\n        add.verify_text_on_page(text='ТЯГ-20240517055115', should_exist=False)\n        time.sleep(1)\n        add.backspace_and_input(add.tractor_number, value='')\n        time.sleep(1)\n        add.input_in_field(add.tractor_number, value='ТЯГ-20240531061917', click_first=True)\n        time.sleep(2)\n        add.find_text_on_page(text='1917', occurrences=3)\n        time.sleep(1)\n        add.backspace_and_input(add.tractor_number, value='')\n        time.sleep(1)\n    \n        # проверка №1 фильтра \"Статус в системе\"\n        add.dropdown_without_input(add.status_in_system_two, option_text='Неактивный')\n        time.sleep(3)\n        add.verify_text_on_page(text='ТЯГ-20240126103308', should_exist=False)\n        time.sleep(2)\n    \n        # проверка №2 фильтра \"Статус в системе\"\n        add.dropdown_without_input(add.status_in_system_two, option_text='Активный')\n        time.sleep(3)\n        add.verify_text_on_page(text='ТЯГ-20240320203430', should_exist=True)\n        time.sleep(2)\n    \n        # проверка №1 фильтра \"Статус в рейсе\"\n        add.dropdown_without_input(add.status_on_flight_two, option_text='Нет заказов')\n        time.sleep(2)\n        add.verify_text_on_page(text='ТЯГ-20240116131200', should_exist=True)\n>       add.verify_text_on_page(text='ТЯГ-20241212233054', should_exist=False)\n\ntests\\test_manual_lkp.py:288: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nself = <pages.manual_page.Manual object at 0x000001AC73237BF0>, text = 'ТЯГ-20241212233054', should_exist = False\n\n    def verify_text_on_page(self, text: str, should_exist: bool = True) -> None:\n        \"\"\"\n        Проверяет наличие или отсутствие заданного текста на всей странице.\n    \n        Parameters\n        ----------\n        text : str\n            Текст для поиска на странице.\n        should_exist : bool, optional\n            Если True, проверяет, что текст присутствует на странице.\n            Если False, проверяет, что текст отсутствует на странице. По умолчанию True.\n    \n        Raises\n        ------\n        AssertionError\n            Если текст не найден при should_exist=True или найден при should_exist=False.\n        \"\"\"\n        # Формируем сообщение для шага Allure и вывода в консоль\n        message = f\"Verify that text '{text}' is {'present' if should_exist else 'absent'} on the page\"\n    \n        with allure.step(message):\n            page_source = self.driver.page_source\n            text_found = text in page_source\n    \n            if should_exist:\n                assert text_found, f\"Expected text '{text}' to be present on the page, but it was not found.\"\n            else:\n>               assert not text_found, f\"Expected text '{text}' to be absent on the page, but it was found.\"\nE               AssertionError: Expected text 'ТЯГ-20241212233054' to be absent on the page, but it was found.\n\nbase\\base_class.py:275: AssertionError","steps":[{"name":"Move to directories_hover","time":{"start":1741545211584,"stop":1741545212645,"duration":1061},"status":"passed","steps":[],"attachments":[],"parameters":[],"hasContent":false,"attachmentStep":false,"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false},{"name":"Click on tractors_list_button","time":{"start":1741545212745,"stop":1741545214143,"duration":1398},"status":"passed","steps":[{"name":"Assert \"Тягачи\" == \"Тягачи\"","time":{"start":1741545214143,"stop":1741545214143,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"hasContent":false,"attachmentStep":false,"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false}],"attachments":[],"parameters":[],"hasContent":true,"attachmentStep":false,"stepsCount":1,"attachmentsCount":0,"shouldDisplayMessage":false},{"name":"Click and Input in tractor_number: 832","time":{"start":1741545214143,"stop":1741545214405,"duration":262},"status":"passed","steps":[],"attachments":[],"parameters":[],"hasContent":false,"attachmentStep":false,"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false},{"name":"Verify that text 'ТЯГ-20240708081832' is present on the page","time":{"start":1741545217406,"stop":1741545217428,"duration":22},"status":"passed","steps":[],"attachments":[],"parameters":[],"hasContent":false,"attachmentStep":false,"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false},{"name":"Verify that text 'ТЯГ-20240517055115' is absent on the page","time":{"start":1741545217428,"stop":1741545217452,"duration":24},"status":"passed","steps":[],"attachments":[],"parameters":[],"hasContent":false,"attachmentStep":false,"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false},{"name":"Backspace all times and input in tractor_number: ","time":{"start":1741545218453,"stop":1741545218574,"duration":121},"status":"passed","steps":[],"attachments":[],"parameters":[],"hasContent":false,"attachmentStep":false,"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false},{"name":"Click and Input in tractor_number: ТЯГ-20240531061917","time":{"start":1741545219575,"stop":1741545220042,"duration":467},"status":"passed","steps":[],"attachments":[],"parameters":[],"hasContent":false,"attachmentStep":false,"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false},{"name":"Text '1917' found 3 times as expected.","time":{"start":1741545222082,"stop":1741545222082,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"hasContent":false,"attachmentStep":false,"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false},{"name":"Backspace all times and input in tractor_number: ","time":{"start":1741545223085,"stop":1741545223265,"duration":180},"status":"passed","steps":[],"attachments":[],"parameters":[],"hasContent":false,"attachmentStep":false,"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false},{"name":"Select 'Неактивный' from dropdown status_in_system_two","time":{"start":1741545224267,"stop":1741545229742,"duration":5475},"status":"passed","steps":[],"attachments":[],"parameters":[],"hasContent":false,"attachmentStep":false,"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false},{"name":"Verify that text 'ТЯГ-20240126103308' is absent on the page","time":{"start":1741545232742,"stop":1741545232766,"duration":24},"status":"passed","steps":[],"attachments":[],"parameters":[],"hasContent":false,"attachmentStep":false,"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false},{"name":"Select 'Активный' from dropdown status_in_system_two","time":{"start":1741545234767,"stop":1741545240014,"duration":5247},"status":"passed","steps":[],"attachments":[],"parameters":[],"hasContent":false,"attachmentStep":false,"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false},{"name":"Verify that text 'ТЯГ-20240320203430' is present on the page","time":{"start":1741545243014,"stop":1741545243045,"duration":31},"status":"passed","steps":[],"attachments":[],"parameters":[],"hasContent":false,"attachmentStep":false,"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false},{"name":"Select 'Нет заказов' from dropdown status_on_flight_two","time":{"start":1741545245046,"stop":1741545250301,"duration":5255},"status":"passed","steps":[],"attachments":[],"parameters":[],"hasContent":false,"attachmentStep":false,"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false},{"name":"Verify that text 'ТЯГ-20240116131200' is present on the page","time":{"start":1741545252301,"stop":1741545252336,"duration":35},"status":"passed","steps":[],"attachments":[],"parameters":[],"hasContent":false,"attachmentStep":false,"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false},{"name":"Verify that text 'ТЯГ-20241212233054' is absent on the page","time":{"start":1741545252337,"stop":1741545252367,"duration":30},"status":"failed","statusMessage":"AssertionError: Expected text 'ТЯГ-20241212233054' to be absent on the page, but it was found.\n","statusTrace":"  File \"C:\\Users\\l2new\\PycharmProjects\\Vezubr_Autotests\\base\\base_class.py\", line 275, in verify_text_on_page\n    assert not text_found, f\"Expected text '{text}' to be absent on the page, but it was found.\"\n           ^^^^^^^^^^^^^^\n","steps":[],"attachments":[],"parameters":[],"hasContent":true,"attachmentStep":false,"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":true},{"name":"Screen taken: tests_test_manual_lkp.py_test_tractor_directory_lkp[lkp]_2025.03.09.18.34.12.png","time":{"start":1741545252607,"stop":1741545252609,"duration":2},"status":"passed","steps":[],"attachments":[{"uid":"12e3baa373e276dc","name":"Screenshot","source":"12e3baa373e276dc.png","type":"image/png","size":133176}],"parameters":[],"hasContent":true,"attachmentStep":false,"stepsCount":0,"attachmentsCount":1,"shouldDisplayMessage":false}],"attachments":[],"parameters":[],"hasContent":true,"attachmentStep":false,"stepsCount":18,"attachmentsCount":1,"shouldDisplayMessage":true},"afterStages":[{"name":"base_fixture::0","time":{"start":1741545252610,"stop":1741545254836,"duration":2226},"status":"passed","steps":[{"name":"Test finish","time":{"start":1741545252610,"stop":1741545254836,"duration":2226},"status":"passed","steps":[],"attachments":[],"parameters":[],"hasContent":false,"attachmentStep":false,"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false}],"attachments":[],"parameters":[],"hasContent":true,"attachmentStep":false,"stepsCount":1,"attachmentsCount":0,"shouldDisplayMessage":false}],"labels":[{"name":"story","value":"Extended test"},{"name":"feature","value":"Фильтры"},{"name":"parentSuite","value":"tests"},{"name":"suite","value":"test_manual_lkp"},{"name":"host","value":"FirexPC"},{"name":"thread","value":"22332-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.test_manual_lkp"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"base_fixture","value":"'lkp'"}],"links":[],"hidden":true,"retry":true,"extra":{"categories":[],"tags":[]},"source":"be910d370512e41.json","parameterValues":["'lkp'"]}