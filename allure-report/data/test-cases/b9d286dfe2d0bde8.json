{"uid":"b9d286dfe2d0bde8","name":"test_two_custom_settings_lkz[lkz]","fullName":"tests.test_settings_custom_lkz#test_two_custom_settings_lkz","historyId":"06afe0745d29c59672e2f89fbb852af1","time":{"start":1742235960486,"stop":1742236047311,"duration":86825},"description":"ЛКЗ. Тест №2 Редактирование кастомных полей","descriptionHtml":"<p>ЛКЗ. Тест №2 Редактирование кастомных полей</p>\n","status":"failed","statusMessage":"AssertionError: Expected text '05485' to be present on the page, but it was not found.","statusTrace":"base_fixture = (<base.base_class.Base object at 0x000001B42E6FB740>, <pages.sidebar.SideBar object at 0x000001B42E6F9160>), domain = 'com'\n\n    @allure.story(\"Extended test\")\n    @allure.feature('Кастомные поля')\n    @allure.description('ЛКЗ. Тест №2 Редактирование кастомных полей')\n    @pytest.mark.parametrize('base_fixture', ['lkz'], indirect=True)  # Параметризация роли\n    def test_two_custom_settings_lkz(base_fixture, domain):\n        # Инициализация базовых объектов через фикстуру\n        base, sidebar = base_fixture\n    \n        # Переход в раздел настройки\n        sidebar.move_and_click(move_to=sidebar.directories_hover, click_to=sidebar.settings_button,\n                               do_assert=True, wait=\"lst\")\n    \n        time.sleep(2)\n        settings = Settings(base.driver)\n        # переход в раздел кастомные поля\n        settings.click_button(settings.custom_fields_tab)\n    \n        # клик по кнопке добавления поля\n        settings.click_button(settings.add_field_button)\n        add_param = CustomFieldsParam(base.driver)\n    \n        # ввод данных кастомного поля\n        add_param.backspace_and_input(add_param.add_ru, value=\"З24-05485\")\n        add_param.backspace_and_input(add_param.add_en, value=\"Z25-0039\")\n        add_param.dropdown_without_input(add_param.add_role, option_text=\"Рейс\")\n        add_param.dropdown_without_input(add_param.add_type, option_text=\"Выбор из нескольких значений\")\n    \n        edit_param = EditFieldsParam(base.driver)\n    \n        # добавляем несколько значений\n        edit_param.click_button(edit_param.add_val)\n        edit_param.input_in_field(edit_param.unique_number_value, value=\"0017\", click_first=True)\n        edit_param.input_in_field(edit_param.name_value, value=\"Z25-0009\", click_first=True, press_enter=True)\n        edit_param.click_button(edit_param.save_unique_value)\n    \n        edit_param.click_button(edit_param.add_val)\n        edit_param.input_in_field(edit_param.unique_number_value, value=\"0018\", click_first=True)\n        edit_param.input_in_field(edit_param.name_value, value=\"Z25-0877\", click_first=True, press_enter=True)\n        edit_param.click_button(edit_param.save_unique_value)\n    \n        edit_param.click_button(edit_param.add_val)\n        edit_param.input_in_field(edit_param.unique_number_value, value=\"0019\", click_first=True)\n        edit_param.input_in_field(edit_param.name_value, value=\"Z25-033\", click_first=True, press_enter=True)\n        edit_param.click_button(edit_param.save_unique_value)\n        time.sleep(2)\n    \n        # сохраняем поле\n        add_param.click_button(add_param.save_custom)\n        time.sleep(2)\n        add_param.click_button(add_param.done_pop_up_second)\n        time.sleep(2)\n    \n        # проверяем наличие кастомного поля\n        add_param.reload_page()\n        time.sleep(3)\n>       add_param.verify_text_on_page(text='05485')\n\ntests\\test_settings_custom_lkz.py:162: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nself = <pages.settings_page.CustomFieldsParam object at 0x000001B42E6F7AA0>, text = '05485', should_exist = True\n\n    def verify_text_on_page(self, text: str, should_exist: bool = True) -> None:\n        \"\"\"\n        Проверяет наличие или отсутствие заданного текста на всей странице.\n    \n        Parameters\n        ----------\n        text : str\n            Текст для поиска на странице.\n        should_exist : bool, optional\n            Если True, проверяет, что текст присутствует на странице.\n            Если False, проверяет, что текст отсутствует на странице. По умолчанию True.\n    \n        Raises\n        ------\n        AssertionError\n            Если текст не найден при should_exist=True или найден при should_exist=False.\n        \"\"\"\n        # Формируем сообщение для шага Allure и вывода в консоль\n        message = f\"Verify that text '{text}' is {'present' if should_exist else 'absent'} on the page\"\n    \n        with allure.step(message):\n            page_source = self.driver.page_source\n            text_found = text in page_source\n    \n            if should_exist:\n>               assert text_found, f\"Expected text '{text}' to be present on the page, but it was not found.\"\nE               AssertionError: Expected text '05485' to be present on the page, but it was not found.\n\nbase\\base_class.py:273: AssertionError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":1,"retriesStatusChange":true,"beforeStages":[{"name":"_session_faker","time":{"start":1742228670612,"stop":1742228670613,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"hasContent":false,"attachmentStep":false,"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false},{"name":"domain","time":{"start":1742235948114,"stop":1742235948114,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"hasContent":false,"attachmentStep":false,"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false},{"name":"base_fixture","time":{"start":1742235948114,"stop":1742235960486,"duration":12372},"status":"passed","steps":[{"name":"Start test","time":{"start":1742235949235,"stop":1742235949235,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"hasContent":false,"attachmentStep":false,"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false},{"name":"Current url: https://enter.vezubr.com/login","time":{"start":1742235953739,"stop":1742235953739,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"hasContent":false,"attachmentStep":false,"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false},{"name":"Input in user_email_input: ***","time":{"start":1742235953772,"stop":1742235953899,"duration":127},"status":"passed","steps":[],"attachments":[],"parameters":[],"hasContent":false,"attachmentStep":false,"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false},{"name":"Input in password_input: ***","time":{"start":1742235953899,"stop":1742235954021,"duration":122},"status":"passed","steps":[],"attachments":[],"parameters":[],"hasContent":false,"attachmentStep":false,"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false},{"name":"Click on login_button","time":{"start":1742235954021,"stop":1742235954144,"duration":123},"status":"passed","steps":[],"attachments":[],"parameters":[],"hasContent":false,"attachmentStep":false,"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false},{"name":"Click on sidebar_button","time":{"start":1742235954144,"stop":1742235960486,"duration":6342},"status":"passed","steps":[],"attachments":[],"parameters":[],"hasContent":false,"attachmentStep":false,"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false}],"attachments":[],"parameters":[],"hasContent":true,"attachmentStep":false,"stepsCount":6,"attachmentsCount":0,"shouldDisplayMessage":false}],"testStage":{"description":"ЛКЗ. Тест №2 Редактирование кастомных полей","status":"failed","statusMessage":"AssertionError: Expected text '05485' to be present on the page, but it was not found.","statusTrace":"base_fixture = (<base.base_class.Base object at 0x000001B42E6FB740>, <pages.sidebar.SideBar object at 0x000001B42E6F9160>), domain = 'com'\n\n    @allure.story(\"Extended test\")\n    @allure.feature('Кастомные поля')\n    @allure.description('ЛКЗ. Тест №2 Редактирование кастомных полей')\n    @pytest.mark.parametrize('base_fixture', ['lkz'], indirect=True)  # Параметризация роли\n    def test_two_custom_settings_lkz(base_fixture, domain):\n        # Инициализация базовых объектов через фикстуру\n        base, sidebar = base_fixture\n    \n        # Переход в раздел настройки\n        sidebar.move_and_click(move_to=sidebar.directories_hover, click_to=sidebar.settings_button,\n                               do_assert=True, wait=\"lst\")\n    \n        time.sleep(2)\n        settings = Settings(base.driver)\n        # переход в раздел кастомные поля\n        settings.click_button(settings.custom_fields_tab)\n    \n        # клик по кнопке добавления поля\n        settings.click_button(settings.add_field_button)\n        add_param = CustomFieldsParam(base.driver)\n    \n        # ввод данных кастомного поля\n        add_param.backspace_and_input(add_param.add_ru, value=\"З24-05485\")\n        add_param.backspace_and_input(add_param.add_en, value=\"Z25-0039\")\n        add_param.dropdown_without_input(add_param.add_role, option_text=\"Рейс\")\n        add_param.dropdown_without_input(add_param.add_type, option_text=\"Выбор из нескольких значений\")\n    \n        edit_param = EditFieldsParam(base.driver)\n    \n        # добавляем несколько значений\n        edit_param.click_button(edit_param.add_val)\n        edit_param.input_in_field(edit_param.unique_number_value, value=\"0017\", click_first=True)\n        edit_param.input_in_field(edit_param.name_value, value=\"Z25-0009\", click_first=True, press_enter=True)\n        edit_param.click_button(edit_param.save_unique_value)\n    \n        edit_param.click_button(edit_param.add_val)\n        edit_param.input_in_field(edit_param.unique_number_value, value=\"0018\", click_first=True)\n        edit_param.input_in_field(edit_param.name_value, value=\"Z25-0877\", click_first=True, press_enter=True)\n        edit_param.click_button(edit_param.save_unique_value)\n    \n        edit_param.click_button(edit_param.add_val)\n        edit_param.input_in_field(edit_param.unique_number_value, value=\"0019\", click_first=True)\n        edit_param.input_in_field(edit_param.name_value, value=\"Z25-033\", click_first=True, press_enter=True)\n        edit_param.click_button(edit_param.save_unique_value)\n        time.sleep(2)\n    \n        # сохраняем поле\n        add_param.click_button(add_param.save_custom)\n        time.sleep(2)\n        add_param.click_button(add_param.done_pop_up_second)\n        time.sleep(2)\n    \n        # проверяем наличие кастомного поля\n        add_param.reload_page()\n        time.sleep(3)\n>       add_param.verify_text_on_page(text='05485')\n\ntests\\test_settings_custom_lkz.py:162: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nself = <pages.settings_page.CustomFieldsParam object at 0x000001B42E6F7AA0>, text = '05485', should_exist = True\n\n    def verify_text_on_page(self, text: str, should_exist: bool = True) -> None:\n        \"\"\"\n        Проверяет наличие или отсутствие заданного текста на всей странице.\n    \n        Parameters\n        ----------\n        text : str\n            Текст для поиска на странице.\n        should_exist : bool, optional\n            Если True, проверяет, что текст присутствует на странице.\n            Если False, проверяет, что текст отсутствует на странице. По умолчанию True.\n    \n        Raises\n        ------\n        AssertionError\n            Если текст не найден при should_exist=True или найден при should_exist=False.\n        \"\"\"\n        # Формируем сообщение для шага Allure и вывода в консоль\n        message = f\"Verify that text '{text}' is {'present' if should_exist else 'absent'} on the page\"\n    \n        with allure.step(message):\n            page_source = self.driver.page_source\n            text_found = text in page_source\n    \n            if should_exist:\n>               assert text_found, f\"Expected text '{text}' to be present on the page, but it was not found.\"\nE               AssertionError: Expected text '05485' to be present on the page, but it was not found.\n\nbase\\base_class.py:273: AssertionError","steps":[{"name":"Move to directories_hover","time":{"start":1742235960486,"stop":1742235961387,"duration":901},"status":"passed","steps":[],"attachments":[],"parameters":[],"hasContent":false,"attachmentStep":false,"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false},{"name":"Click on settings_button","time":{"start":1742235961488,"stop":1742236021696,"duration":60208},"status":"passed","steps":[{"name":"Element 'loading_list' is not visible","time":{"start":1742236021696,"stop":1742236021696,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"hasContent":false,"attachmentStep":false,"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false},{"name":"Spinner did not appear","time":{"start":1742236021696,"stop":1742236021696,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"hasContent":false,"attachmentStep":false,"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false}],"attachments":[],"parameters":[],"hasContent":true,"attachmentStep":false,"stepsCount":2,"attachmentsCount":0,"shouldDisplayMessage":false},{"name":"Click on custom_field","time":{"start":1742236023697,"stop":1742236023843,"duration":146},"status":"passed","steps":[],"attachments":[],"parameters":[],"hasContent":false,"attachmentStep":false,"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false},{"name":"Click on add_field_button","time":{"start":1742236023844,"stop":1742236023952,"duration":108},"status":"passed","steps":[],"attachments":[],"parameters":[],"hasContent":false,"attachmentStep":false,"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false},{"name":"Backspace all times and input in add_ru: З24-05485","time":{"start":1742236023952,"stop":1742236024119,"duration":167},"status":"passed","steps":[],"attachments":[],"parameters":[],"hasContent":false,"attachmentStep":false,"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false},{"name":"Backspace all times and input in add_en: Z25-0039","time":{"start":1742236024119,"stop":1742236024247,"duration":128},"status":"passed","steps":[],"attachments":[],"parameters":[],"hasContent":false,"attachmentStep":false,"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false},{"name":"Select 'Рейс' from dropdown add_role","time":{"start":1742236024247,"stop":1742236029432,"duration":5185},"status":"passed","steps":[],"attachments":[],"parameters":[],"hasContent":false,"attachmentStep":false,"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false},{"name":"Select 'Выбор из нескольких значений' from dropdown add_role","time":{"start":1742236029432,"stop":1742236034619,"duration":5187},"status":"passed","steps":[],"attachments":[],"parameters":[],"hasContent":false,"attachmentStep":false,"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false},{"name":"Click on add_val","time":{"start":1742236034619,"stop":1742236034711,"duration":92},"status":"passed","steps":[],"attachments":[],"parameters":[],"hasContent":false,"attachmentStep":false,"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false},{"name":"Click and Input in unique_number_value: 0017","time":{"start":1742236034711,"stop":1742236035363,"duration":652},"status":"passed","steps":[],"attachments":[],"parameters":[],"hasContent":false,"attachmentStep":false,"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false},{"name":"Click and Input in name_value: Z25-0009","time":{"start":1742236035363,"stop":1742236035523,"duration":160},"status":"passed","steps":[],"attachments":[],"parameters":[],"hasContent":false,"attachmentStep":false,"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false},{"name":"Click on name_value","time":{"start":1742236035523,"stop":1742236035614,"duration":91},"status":"passed","steps":[],"attachments":[],"parameters":[],"hasContent":false,"attachmentStep":false,"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false},{"name":"Click on add_val","time":{"start":1742236035614,"stop":1742236035900,"duration":286},"status":"passed","steps":[],"attachments":[],"parameters":[],"hasContent":false,"attachmentStep":false,"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false},{"name":"Click and Input in unique_number_value: 0018","time":{"start":1742236035900,"stop":1742236036542,"duration":642},"status":"passed","steps":[],"attachments":[],"parameters":[],"hasContent":false,"attachmentStep":false,"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false},{"name":"Click and Input in name_value: Z25-0877","time":{"start":1742236036542,"stop":1742236036691,"duration":149},"status":"passed","steps":[],"attachments":[],"parameters":[],"hasContent":false,"attachmentStep":false,"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false},{"name":"Click on name_value","time":{"start":1742236036691,"stop":1742236036775,"duration":84},"status":"passed","steps":[],"attachments":[],"parameters":[],"hasContent":false,"attachmentStep":false,"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false},{"name":"Click on add_val","time":{"start":1742236036775,"stop":1742236037075,"duration":300},"status":"passed","steps":[],"attachments":[],"parameters":[],"hasContent":false,"attachmentStep":false,"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false},{"name":"Click and Input in unique_number_value: 0019","time":{"start":1742236037075,"stop":1742236037721,"duration":646},"status":"passed","steps":[],"attachments":[],"parameters":[],"hasContent":false,"attachmentStep":false,"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false},{"name":"Click and Input in name_value: Z25-033","time":{"start":1742236037721,"stop":1742236037866,"duration":145},"status":"passed","steps":[],"attachments":[],"parameters":[],"hasContent":false,"attachmentStep":false,"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false},{"name":"Click on name_value","time":{"start":1742236037866,"stop":1742236037951,"duration":85},"status":"passed","steps":[],"attachments":[],"parameters":[],"hasContent":false,"attachmentStep":false,"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false},{"name":"Click on save_custom","time":{"start":1742236039952,"stop":1742236040045,"duration":93},"status":"passed","steps":[],"attachments":[],"parameters":[],"hasContent":false,"attachmentStep":false,"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false},{"name":"Click on done_pop_up_second","time":{"start":1742236042046,"stop":1742236042159,"duration":113},"status":"passed","steps":[],"attachments":[],"parameters":[],"hasContent":false,"attachmentStep":false,"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false},{"name":"Page reload successfully","time":{"start":1742236044281,"stop":1742236044281,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"hasContent":false,"attachmentStep":false,"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false},{"name":"Verify that text '05485' is present on the page","time":{"start":1742236047282,"stop":1742236047310,"duration":28},"status":"failed","statusMessage":"AssertionError: Expected text '05485' to be present on the page, but it was not found.\n","statusTrace":"  File \"C:\\Users\\l2new\\PycharmProjects\\Vezubr_Autotests\\base\\base_class.py\", line 273, in verify_text_on_page\n    assert text_found, f\"Expected text '{text}' to be present on the page, but it was not found.\"\n           ^^^^^^^^^^\n","steps":[],"attachments":[],"parameters":[],"hasContent":true,"attachmentStep":false,"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":true},{"name":"Screen taken: tests_test_settings_custom_lkz.py_test_two_custom_settings_lkz[lkz]_2025.03.17.18.27.27.png","time":{"start":1742236047517,"stop":1742236047518,"duration":1},"status":"passed","steps":[],"attachments":[{"uid":"7c38c1c35075a425","name":"Screenshot","source":"7c38c1c35075a425.png","type":"image/png","size":53441}],"parameters":[],"hasContent":true,"attachmentStep":false,"stepsCount":0,"attachmentsCount":1,"shouldDisplayMessage":false}],"attachments":[],"parameters":[],"hasContent":true,"attachmentStep":false,"stepsCount":27,"attachmentsCount":1,"shouldDisplayMessage":true},"afterStages":[{"name":"base_fixture::0","time":{"start":1742236047518,"stop":1742236049697,"duration":2179},"status":"passed","steps":[{"name":"Test finish","time":{"start":1742236047518,"stop":1742236049697,"duration":2179},"status":"passed","steps":[],"attachments":[],"parameters":[],"hasContent":false,"attachmentStep":false,"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false}],"attachments":[],"parameters":[],"hasContent":true,"attachmentStep":false,"stepsCount":1,"attachmentsCount":0,"shouldDisplayMessage":false}],"labels":[{"name":"story","value":"Extended test"},{"name":"feature","value":"Кастомные поля"},{"name":"parentSuite","value":"tests"},{"name":"suite","value":"test_settings_custom_lkz"},{"name":"host","value":"FirexPC"},{"name":"thread","value":"22408-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.test_settings_custom_lkz"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"base_fixture","value":"'lkz'"}],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[{"uid":"bf93e49e50603006","status":"passed","time":{"start":1741547323383,"stop":1741547496435,"duration":173052}}],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"tags":[]},"source":"b9d286dfe2d0bde8.json","parameterValues":["'lkz'"]}